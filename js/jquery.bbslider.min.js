/**
 * Bare Bones Slider
 * http://www.bbslider.com/
 *
 * Author
 * Richard Hung
 * http://www.magicmediamuse.com/
 *
 * Version
 * 1.0.6
 * 
 * Copyright (c) 2013 Richard Hung.
 *
 * License
 * Bare Bones Slider by Richard Hung is licensed under a Creative Commons Attribution-NonCommercial 3.0 Unported License.
 * http://creativecommons.org/licenses/by-nc/3.0/deed.en_US
 */

(function(e){var t={init:function(t){var n={page:1,duration:1e3,controls:false,pager:false,pagerWrap:".pager-wrap",pageInfo:false,infoWrap:".info-wrap",onDemand:false,placeholder:"/images/blank.gif",auto:false,timer:5e3,loop:true,transition:"fade",callback:null,easing:"swing",autoHeight:true,pauseOnHit:true,randomPlay:false,loopTrans:true};var t=e.extend({},n,t);return this.each(function(){var n=e(this);var r=e(n).children();var i=t.page-1;var s=t.page-1;var o=e(r).length;e(n).data({autoPlay:false,pIndex:i,cIndex:s,pCount:o,transition:t.transition,easing:t.easing,duration:t.duration,onDemand:t.onDemand,infoWrap:t.infoWrap,pageInfo:t.pageInfo,callback:t.callback,loop:t.loop,timer:t.timer,loopTrans:t.loopTrans,pauseOnHit:t.pauseOnHit,randomPlay:t.randomPlay,placeholder:t.placeholder,pager:t.pager,pagerWrap:t.pagerWrap,autoHeight:t.autoHeight});e(n).addClass("bbslider-wrapper");e(r).addClass("panel");if(t.autoHeight==true){var u=0;e(r).each(function(){var t=e(this).outerHeight();if(t>u){u=t}});e(n).height(u)}if(t.onDemand==true){e(n).bbslider("placeholder")}if(t.onDemand==true){e(r).eq(i).bbslider("loadImg")}if(t.pageInfo==true){e(n).bbslider("infoParse")}var a=t.transition;switch(a){case"fade":e(r).css({opacity:0}).eq(i).css({opacity:1});break;case"slide":e(r).hide().eq(i).show();break;case"blind":e(r).wrapInner('<div class="panel-inner" />');var f=e(n).find(".panel-inner");e(r).css({overflow:"hidden",position:"absolute",height:"100%",width:0}).eq(i).css({width:"100%"});e(f).css({top:0,bottom:0,left:0,right:0});break;case"none":default:e(r).hide().eq(i).show()}if(t.pager==true){e(this).bbslider("pager",t.pagerWrap)}if(t.controls==true){var l=e(n).bbslider("controls");var c=l.next;var h=l.prev;e(c).click(function(r){e(n).bbslider("next");r.preventDefault();if(t.pauseOnHit==true){e(n).bbslider("pause")}});e(h).click(function(r){e(n).bbslider("prev");r.preventDefault();if(t.pauseOnHit==true){e(n).bbslider("pause")}})}if(t.auto==true){e(n).bbslider("play")}})},update:function(){return this.each(function(){var t=e(this);var n=e(t).children();var r=e(n).length;var i=e(t).data("onDemand");var s=e(t).data("pageInfo");var o=e(t).data("pager");var u=e(t).data("autoHeight");var a=e(t).data("pIndex");e(t).data("pCount",r);e(n).addClass("panel");if(u==true){var f=0;e(n).each(function(){var t=e(this).outerHeight();if(t>f){f=t}});e(t).height(f)}if(i==true){e(t).bbslider("placeholder")}if(i==true){e(n).eq(a).bbslider("loadImg")}if(s==true){e(t).bbslider("infoParse")}var l=e(t).data("transition");switch(l){case"fade":e(n).css({opacity:0}).eq(a).css({opacity:1});break;case"slide":e(n).hide().eq(a).show();break;case"blind":e(n).wrapInner('<div class="panel-inner" />');var c=e(t).find(".panel-inner");e(n).css({overflow:"hidden",position:"absolute",height:"100%",width:0}).eq(a).css({width:"100%"});e(c).css({top:0,bottom:0,left:0,right:0});break;case"none":default:e(n).hide().eq(a).show()}if(o==true){e(this).bbslider("pager")}})},destroy:function(){return this.each(function(){var t=e(this);var n=e(this).children(".panel");e(t).removeClass("bbslider-wrapper");e(n).removeClass("panel");e(t).css("height","");if(e(t).data("onDemand")==true){e(n).bbslider("loadImg")}if(e(t).data("pageInfo")==true){var r=e(t).data("infoWrap");e(r).empty()}var i=e(t).data("transition");switch(i){case"fade":e(n).css({opacity:""});break;case"slide":e(n).show();break;case"blind":e(n).css({overflow:"",position:"",height:"",width:""});var s=e(t).find(".panel-inner");e(s).contents().unwrap();break;case"none":default:e(n).show()}e("#"+wid+"-pager").remove();e(t).children(".prev-control-wrapper").remove();e(t).children(".next-control-wrapper").remove();var o=e(t).data("autoPlay");if(o==true){e(t).bbslider("pause")}e(t).removeData()})},play:function(){var t=e(this);var n=e(t).data("autoPlay");var r=e(t).data("randomPlay");if(n==false){var i=e(t).data("timer");var s=setInterval(function(){if(r==true){e(t).bbslider("randomSlide")}else{e(t).bbslider("next")}},i);e(t).data("tid",s);e(t).data("autoPlay",true)}},pause:function(){var t=e(this).data("tid");var n=e(this).data("autoPlay");if(n==true){clearInterval(t);e(wrapper).data("autoPlay",false)}},randomSlide:function(){var t=e(this);var n=e(t).data("pCount");var r=e(t).data("loopTrans");var i=e(t).data("pIndex");var s=Math.round(1+Math.floor(Math.random()*n));var o=s-1;if(r==true){e(t).data("cIndex",i);e(t).data("pIndex",o);e(t).bbslider("forPage",o)}else{e(t).bbslider("travel",o)}},placeholder:function(){var t=e(this).data("placeholder");var n=e(this).find("img");e(n).each(function(){e(this).attr("data-placeholder",e(this).attr("src"));e(this).attr("src",t)})},loadImg:function(){var t=e(this).find("img");e(t).each(function(){e(this).attr("src",e(this).attr("data-placeholder")).removeAttr("data-placeholder")})},infoParse:function(){var t=e(this).data("pCount");var n=e(this).data("pIndex");var r=e(this).data("infoWrap");var i=n+1;e(r).text(i+" of "+t)},pager:function(){var t=e(this).data("pCount");var n=e(this).data("pagerWrap");var r=e(this).find(".panel");var i=e(this).attr("id");e(n).find("#"+i+"-pager").remove();var s=e('<ul class="page-list" id="'+i+'-pager" />').appendTo(n);for(pageNum=1;pageNum<=t;pageNum++){if(e(r).eq(pageNum-1).attr("title")){var o=e(r).eq(pageNum-1).attr("title")}else{var o=pageNum}e('<li><a href="#'+pageNum+'" data-link="'+i+'" class="bb-pager-link">'+o+"</a></li>").appendTo(s)}e(s).find("a").bbslider("bindpager");e(this).bbslider("pagerUpdate")},pagerUpdate:function(){var t=e(this).attr("id");var n=e(this).data("pIndex");e("#"+t+"-pager").children().removeClass("activePanel").eq(n).addClass("activePanel")},bindpager:function(){e(this).bind("click",function(t){var n=e(this).attr("href");var r=n.substring(n.indexOf("#"));var i=parseInt(r.substring(1))-1;var s=e(this).attr("data-link");var o=e("#"+s);var u=e(o).data("pIndex");var a=e(o).data("pauseOnHit");if(i>u){e(o).data("cIndex",u);var u=i;e(o).data("pIndex",u);e(o).bbslider("forPage",u)}else if(i<u){e(o).data("cIndex",u);var u=i;e(o).data("pIndex",u);e(o).bbslider("backPage",u)}if(a==true){e(o).bbslider("pause")}t.preventDefault()})},controls:function(){var t=e(this).data("pIndex");var n=e(this).data("pCount");var r=e(this).data("loop");var i=e('<a class="prev controls" href="#">Prev</a>').prependTo(this);var s=e('<a class="next controls" href="#">Next</a>').prependTo(this);e(i).wrap('<div class="prev-control-wrapper"></div>');e(s).wrap('<div class="next-control-wrapper"></div>');var o=e(this).children(".prev-control-wrapper");var u=e(this).children(".next-control-wrapper");if(t==0&&r==false){e(o).css("display","none")}if(n<=t+1&&r==false){e(u).css("display","none")}var a={};a.next=e(s);a.prev=e(i);return a},prev:function(){var t=e(this).data("loop");var n=e(this).data("pCount");var r=e(this).data("pIndex");var i=e(this).data("loopTrans");var s=r;e(this).data("cIndex",s);if(r>0){r=s-1;e(this).data("pIndex",r);e(this).bbslider("backPage",r)}else if(t==true){r=n-1;e(this).data("pIndex",r);if(i==true){e(this).bbslider("backPage",r)}else{e(this).bbslider("forPage",r)}}},next:function(){var t=e(this).data("loop");var n=e(this).data("pCount");var r=e(this).data("pIndex");var i=e(this).data("loopTrans");var s=r;e(this).data("cIndex",s);if(n>r+1){r=s+1;e(this).data("pIndex",r);e(this).bbslider("forPage",r)}else if(t==true){var r=0;e(this).data("pIndex",r);if(i==true){e(this).bbslider("forPage",r)}else{e(this).bbslider("backPage",r)}}},travel:function(t){var n=e(this).data("pIndex");if(n<t){var r=n;var n=t;e(this).data("pIndex",n);e(this).data("cIndex",r);e(this).bbslider("forPage",n)}else if(n>t){var r=n;var n=t;e(this).data("pIndex",n);e(this).data("cIndex",r);e(this).bbslider("backPage",n)}},backPage:function(t){var n=e(this).data("loop");if(e(this).data("onDemand")==true){e(this).children(".panel").eq(t).bbslider("loadImg")}e(this).children(".panel").stop(true,true);var r=e(this).data("transition");switch(r){case"fade":e(this).bbslider("fade");break;case"slide":e(this).bbslider("slideBack");break;case"blind":e(this).bbslider("blindBack");break;case"none":default:e(this).bbslider("toggle")}if(t==0&&n==false){e(this).find(".prev-control-wrapper").css("display","none")}e(this).find(".next-control-wrapper").css("display","block");if(e(this).data("pageInfo")==true){e(this).bbslider("infoParse")}e(this).bbslider("pagerUpdate");var i=e(this).data("callback");if(e.isFunction(i)){i.call(this)}},forPage:function(t){var n=e(this).data("pCount");var r=e(this).data("loop");if(e(this).data("onDemand")==true){e(this).children(".panel").eq(t).bbslider("loadImg")}e(this).children(".panel").stop(true,true);var i=e(this).data("transition");switch(i){case"fade":e(this).bbslider("fade");break;case"slide":e(this).bbslider("slideFor");break;case"blind":e(this).bbslider("blindFor");break;case"none":default:e(this).bbslider("toggle")}if(n<=t+1&&r==false){e(this).find(".next-control-wrapper").css("display","none")}e(this).find(".prev-control-wrapper").css("display","block");if(e(this).data("pageInfo")==true){e(this).bbslider("infoParse")}e(this).bbslider("pagerUpdate");var s=e(this).data("callback");if(e.isFunction(s)){s.call(this)}},toggle:function(){var t=e(this).data("pIndex");var n=e(this).data("cIndex");var r=e(this).children(".panel");e(r).eq(n).hide();e(r).eq(t).show()},fade:function(){var t=e(this).children(".panel");var n=e(this).data("cIndex");var r=e(this).data("pIndex");var i=e(this).data("easing");var s=e(this).data("duration");e(t).eq(n).animate({opacity:0},s,i);e(t).eq(r).animate({opacity:1},s,i)},blindFor:function(){var t=e(this).children(".panel");var n=e(this).find(".panel-inner");var r=e(this).data("cIndex");var i=e(this).data("pIndex");var s=e(this).data("easing");var o=e(this).data("duration");var u=e(this).width();e(n).stop(true,true);e(t).stop(true,true);e(t).eq(r).css({left:0,right:""}).animate({width:0},o,s);e(t).eq(i).css({marginLeft:"",left:"",right:0}).animate({width:"100%"},o,s);e(n).eq(i).css({marginLeft:-u}).animate({marginLeft:0},o,s)},blindBack:function(){var t=e(this).children(".panel");var n=e(this).find(".panel-inner");var r=e(this).data("cIndex");var i=e(this).data("pIndex");var s=e(this).data("easing");var o=e(this).data("duration");var u=e(this).width();e(n).stop(true,true);e(t).stop(true,true);e(t).eq(r).css({left:"",right:0}).animate({width:0},o,s);e(n).eq(r).css({marginLeft:""}).animate({marginLeft:-u},o,s);e(t).eq(i).css({left:0,right:""}).animate({width:"100%"},o,s);e(n).eq(i).css({marginLeft:""})},slideFor:function(){var t=e(this).children(".panel");var n=e(this).data("cIndex");var r=e(this).data("pIndex");var i=e(this).data("easing");var s=e(this).data("duration");var o=e(this).width();e(t).eq(n).animate({left:-o},s,i);e(t).eq(r).show().css({left:"",right:-o}).animate({right:0},s,i)},slideBack:function(){var t=e(this).children(".panel");var n=e(this).data("cIndex");var r=e(this).data("pIndex");var i=e(this).data("easing");var s=e(this).data("duration");var o=e(this).width();e(t).eq(n).animate({left:o},s,i);e(t).eq(r).show().css({right:"",left:-o}).animate({left:0},s,i)}};e.fn.bbslider=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.bbslider")}};e(".bb-pager-link").bbslider("bindpager")})(jQuery)