/**
 * Bare Bones Slider
 * http://www.bbslider.com/
 *
 * Author
 * Richard Hung
 * http://www.magicmediamuse.com/
 *
 * Version
 * 1.1.5
 * 
 * Copyright (c) 2013 Richard Hung.
 * 
 * License
 * Bare Bones Slider by Richard Hung is licensed under a Creative Commons Attribution-NonCommercial 3.0 Unported License.
 * http://creativecommons.org/licenses/by-nc/3.0/deed.en_US
 */

(function(e){var t={init:function(t){var n={page:1,duration:1e3,controls:false,pager:false,pagerWrap:".pager-wrap",pageInfo:false,infoWrap:".info-wrap",onDemand:false,placeholder:"/images/blank.gif",auto:false,timer:5e3,loop:true,transition:"fade",callback:null,easing:"swing",autoHeight:true,pauseOnHit:true,randomPlay:false,loopTrans:true,touch:false,touchoffset:50};var t=e.extend({},n,t);return this.each(function(){var n=e(this);var r=n.children();var i=t.page-1;var s=t.page-1;var o=r.length;n.data({autoPlay:false,pIndex:i,cIndex:s,pCount:o,transition:t.transition,easing:t.easing,duration:t.duration,onDemand:t.onDemand,infoWrap:t.infoWrap,pageInfo:t.pageInfo,callback:t.callback,loop:t.loop,timer:t.timer,loopTrans:t.loopTrans,pauseOnHit:t.pauseOnHit,randomPlay:t.randomPlay,placeholder:t.placeholder,pager:t.pager,pagerWrap:t.pagerWrap,autoHeight:t.autoHeight});n.addClass("bbslider-wrapper");r.addClass("panel");if(t.onDemand==true){n.bbslider("placeholder");r.eq(i).bbslider("loadImg")}if(t.pageInfo==true){n.bbslider("infoParse")}if(t.pager==true){n.bbslider("pager",t.pagerWrap)}if(t.controls==true){var u=n.bbslider("controls");var a=u.next;var f=u.prev;a.click(function(e){n.bbslider("next");e.preventDefault();if(t.pauseOnHit==true){n.bbslider("pause")}});f.click(function(e){n.bbslider("prev");e.preventDefault();if(t.pauseOnHit==true){n.bbslider("pause")}})}if(t.touch==true){var l;var c;var h;n.bind("touchstart",function(e){e.preventDefault();var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];l=t.pageX});n.bind("touchend",function(e){e.preventDefault();var r=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];c=r.pageX;h=t.touchoffset;if(c>l+h){n.bbslider("prev")}else if(c<l-h){n.bbslider("next")}})}if(t.auto==true){n.bbslider("play")}n.bbslider("setup");if(t.autoHeight==true){var p=0;r.each(function(){var t=e(this).outerHeight(true);if(t>p){p=t}});n.height(p)}})},update:function(){return this.each(function(){var t=e(this);var n=t.children(":not(.control-wrapper)");var r=n.length;var i=t.data("onDemand");var s=t.data("pageInfo");var o=t.data("pager");var u=t.data("autoHeight");var a=t.data("pIndex");t.data("pCount",r);n.addClass("panel");if(i==true){t.bbslider("placeholder");n.eq(a).bbslider("loadImg")}if(s==true){t.bbslider("infoParse")}if(o==true){t.bbslider("pager")}t.bbslider("setup");if(u==true){var f=0;n.each(function(){var t=e(this).outerHeight(true);if(t>f){f=t}});t.height(f)}})},destroy:function(){return this.each(function(){var t=e(this);var n=t.children(".panel");t.removeClass("bbslider-wrapper");n.removeClass("panel active slide fade blind none slideVert");t.css("height","");if(t.data("onDemand")==true){n.bbslider("loadImg")}if(t.data("pageInfo")==true){var r=t.data("infoWrap");r.empty()}var i=t.data("transition");switch(i){case"fade":n.removeClass("fade");break;case"slide":n.removeClass("slide");break;case"slideVert":n.removeClass("slideVert");break;case"blind":n.removeClass("blind");t.find(".panel-inner").contents().unwrap();break;case"none":default:n.removeClass("none")}e("#"+wid+"-pager").remove();t.children(".prev-control-wrapper").remove();t.children(".next-control-wrapper").remove();var s=t.data("autoPlay");if(s==true){t.bbslider("pause")}t.removeData()})},play:function(){return this.each(function(){var t=e(this);var n=t.data("autoPlay");var r=t.data("randomPlay");if(n==false){var i=t.data("timer");var s=setInterval(function(){if(r==true){t.bbslider("randomSlide")}else{t.bbslider("next")}},i);t.data("tid",s);t.data("autoPlay",true)}})},pause:function(){return this.each(function(){var t=e(this).data("tid");var n=e(this).data("autoPlay");if(n==true){clearInterval(t);wrapper.data("autoPlay",false)}})},randomSlide:function(){return this.each(function(){var t=e(this);var n=t.data("pCount");var r=t.data("loopTrans");var i=t.data("pIndex");var s=Math.round(1+Math.floor(Math.random()*n));var o=s-1;if(r==true){t.data("cIndex",i);t.data("pIndex",o);t.bbslider("forPage",o)}else{t.bbslider("travel",o)}})},setup:function(){var t=this;var n=t.children(".panel");var r=t.data("pIndex");var i=t.data("transition");switch(i){case"fade":n.addClass("fade").eq(r).css({opacity:1});break;case"slide":n.addClass("slide").eq(r).show();break;case"slideVert":n.addClass("slideVert").eq(r).show();break;case"blind":var s=t.width();n.children(".panel-inner").contents().unwrap();n.wrapInner('<div class="panel-inner" />');n.addClass("blind").eq(r).css({width:"100%"});n.children(".panel-inner").width(s);var o=0;n.children(".panel-inner").each(function(){var t=e(this).wrapInner("<div>").children().outerHeight(true);if(t>o){o=t}e(this).children().contents().unwrap()});n.height(o);n.children(".panel-inner").height(o);break;case"none":default:n.addClass("none").eq(r).show()}n.eq(r).addClass("active")},placeholder:function(){var t=this.data("placeholder");var n=this.children(".panel").find("img");e(n).each(function(){if(!e(this).attr("data-placeholder")){e(this).attr("data-placeholder",e(this).attr("src"));e(this).attr("src",t)}})},loadImg:function(){var t=this.find("img");e(t).each(function(){e(this).attr("src",e(this).attr("data-placeholder")).removeAttr("data-placeholder")})},infoParse:function(){var t=this;var n=t.data("pCount");var r=t.data("pIndex");var i=e(t.data("infoWrap"));var s=r+1;i.text(s+" of "+n)},pager:function(){var t=this;var n=t.data("pCount");var r=t.find(".panel");var i=t.attr("id");var s=e(t.data("pagerWrap"));s.find("#"+i+"-pager").remove();var o=e('<ul class="page-list" id="'+i+'-pager" />').appendTo(s);for(pageNum=1;pageNum<=n;pageNum++){if(r.eq(pageNum-1).attr("title")){var u=r.eq(pageNum-1).attr("title")}else{var u=pageNum}e('<li><a href="#'+pageNum+'" data-link="'+i+'" class="bb-pager-link">'+u+"</a></li>").appendTo(o)}o.find("a").bbslider("bindpager");t.bbslider("pagerUpdate")},pagerUpdate:function(){var t=this.attr("id");var n=this.data("pIndex");e("#"+t+"-pager").children().removeClass("activePanel").eq(n).addClass("activePanel")},bindpager:function(){return this.on("click",function(t){var n=e(this).attr("href");var r=n.substring(n.indexOf("#"));var i=parseInt(r.substring(1))-1;var s=e(this).attr("data-link");var o=e("#"+s);var u=o.data("pIndex");var a=o.data("pauseOnHit");if(i>u){o.data("cIndex",u);var u=i;o.data("pIndex",u);o.bbslider("forPage",u)}else if(i<u){o.data("cIndex",u);var u=i;o.data("pIndex",u);o.bbslider("backPage",u)}if(a==true){o.bbslider("pause")}t.preventDefault()})},controls:function(){var t=this.data("pIndex");var n=this.data("pCount");var r=this.data("loop");var i=e('<a class="prev control" href="#">Prev</a>').prependTo(this);var s=e('<a class="next control" href="#">Next</a>').prependTo(this);i.wrap('<div class="prev-control-wrapper control-wrapper" />');s.wrap('<div class="next-control-wrapper control-wrapper" />');var o=this.children(".prev-control-wrapper");var u=this.children(".next-control-wrapper");if(t==0&&r==false){o.css("display","none")}if(n<=t+1&&r==false){u.css("display","none")}var a={};a.next=s;a.prev=i;return a},prev:function(){return this.each(function(){var t=e(this);var n=t.data("loop");var r=t.data("pCount");var i=t.data("pIndex");var s=t.data("loopTrans");var o=i;t.data("cIndex",o);if(i>0){i=o-1;t.data("pIndex",i);t.bbslider("backPage",i)}else if(n==true){i=r-1;t.data("pIndex",i);if(s==true){t.bbslider("backPage",i)}else{t.bbslider("forPage",i)}}})},next:function(){return this.each(function(){var t=e(this);var n=t.data("loop");var r=t.data("pCount");var i=t.data("pIndex");var s=t.data("loopTrans");var o=i;t.data("cIndex",o);if(r>i+1){i=o+1;t.data("pIndex",i);t.bbslider("forPage",i)}else if(n==true){var i=0;t.data("pIndex",i);if(s==true){t.bbslider("forPage",i)}else{t.bbslider("backPage",i)}}})},travel:function(t){return this.each(function(){var n=e(this);var r=n.data("pIndex");if(r<t){var i=r;var r=t;n.data("pIndex",r);n.data("cIndex",i);n.bbslider("forPage",r)}else if(r>t){var i=r;var r=t;n.data("pIndex",r);n.data("cIndex",i);n.bbslider("backPage",r)}})},backPage:function(t){return this.each(function(){var t=e(this);var n=t.data("loop");var r=t.data("pIndex");var i=t.children(".panel");i.removeClass("active").eq(r).addClass("active");if(t.data("onDemand")==true){i.eq(r).bbslider("loadImg")}t.children(".panel").stop(true,true);var s=t.data("transition");switch(s){case"fade":t.bbslider("fade");break;case"slide":t.bbslider("slideBack");break;case"slideVert":t.bbslider("slideVertBack");break;case"blind":t.bbslider("blindBack");break;case"none":default:t.bbslider("toggle")}if(r==0&&n==false){t.find(".prev-control-wrapper").css("display","none")}t.find(".next-control-wrapper").css("display","block");if(t.data("pageInfo")==true){t.bbslider("infoParse")}t.bbslider("pagerUpdate");var o=t.data("callback");if(e.isFunction(o)){o.call(this)}})},forPage:function(t){return this.each(function(){var t=e(this);var n=t.data("pCount");var r=t.data("loop");var i=t.data("pIndex");var s=t.children(".panel");s.removeClass("active").eq(i).addClass("active");if(t.data("onDemand")==true){s.eq(i).bbslider("loadImg")}t.children(".panel").stop(true,true);var o=t.data("transition");switch(o){case"fade":t.bbslider("fade");break;case"slide":t.bbslider("slideFor");break;case"slideVert":t.bbslider("slideVertFor");break;case"blind":t.bbslider("blindFor");break;case"none":default:t.bbslider("toggle")}if(n<=i+1&&r==false){t.find(".next-control-wrapper").css("display","none")}t.find(".prev-control-wrapper").css("display","block");if(t.data("pageInfo")==true){t.bbslider("infoParse")}t.bbslider("pagerUpdate");var u=t.data("callback");if(e.isFunction(u)){u.call(this)}})},toggle:function(){var e=this;var t=e.data("pIndex");var n=e.data("cIndex");var r=e.children(".panel");r.eq(n).hide();r.eq(t).show()},fade:function(){var e=this;var t=e.children(".panel");var n=e.data("cIndex");var r=e.data("pIndex");var i=e.data("easing");var s=e.data("duration");t.eq(n).animate({opacity:0},s,i);t.eq(r).animate({opacity:1},s,i)},blindFor:function(){var e=this;var t=e.children(".panel");var n=e.find(".panel-inner");var r=e.data("cIndex");var i=e.data("pIndex");var s=e.data("easing");var o=e.data("duration");var u=e.width();n.stop(true,true);t.stop(true,true);t.eq(r).css({left:0,right:""}).animate({width:0},o,s);t.eq(i).css({marginLeft:"",left:"",right:0}).animate({width:"100%"},o,s);n.eq(i).css({marginLeft:-u}).animate({marginLeft:0},o,s)},blindBack:function(){var e=this;var t=e.children(".panel");var n=e.find(".panel-inner");var r=e.data("cIndex");var i=e.data("pIndex");var s=e.data("easing");var o=e.data("duration");var u=e.width();n.stop(true,true);t.stop(true,true);t.eq(r).css({left:"",right:0}).animate({width:0},o,s);n.eq(r).css({marginLeft:""}).animate({marginLeft:-u},o,s);t.eq(i).css({left:0,right:""}).animate({width:"100%"},o,s);n.eq(i).css({marginLeft:""})},slideFor:function(){var e=this;var t=e.children(".panel");var n=e.data("cIndex");var r=e.data("pIndex");var i=e.data("easing");var s=e.data("duration");var o=e.width();t.eq(n).animate({left:-o},s,i);t.eq(r).show().css({left:"",right:-o}).animate({right:0},s,i)},slideBack:function(){var e=this;var t=e.children(".panel");var n=e.data("cIndex");var r=e.data("pIndex");var i=e.data("easing");var s=e.data("duration");var o=e.width();t.eq(n).animate({left:o},s,i);t.eq(r).show().css({right:"",left:-o}).animate({left:0},s,i)},slideVertFor:function(){var t=this;var n=t.children(".panel");var r=t.data("cIndex");var i=t.data("pIndex");var s=t.data("easing");var o=t.data("duration");var u=t.height();n.stop(true,true);n.eq(r).css({top:0}).animate({top:-u},o,s,function(){e(this).hide()});n.eq(i).show().css({top:u}).animate({top:0},o,s)},slideVertBack:function(){var t=this;var n=t.children(".panel");var r=t.find(".panel-inner");var i=t.data("cIndex");var s=t.data("pIndex");var o=t.data("easing");var u=t.data("duration");var a=t.height();n.stop(true,true);n.eq(i).css({top:0}).animate({top:a},u,o,function(){e(this).hide()});n.eq(s).show().css({top:-a}).animate({top:0},u,o)}};e.fn.bbslider=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.bbslider")}};e(".bb-pager-link").bbslider("bindpager")})(jQuery)